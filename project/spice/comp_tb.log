
                 *********************************************
                 *                                           *
                 *             A I M - S p i c e             *
                 *                                           *
                 *         Professional Version 2020.100           *
                 *                                           *
                 *********************************************

	Date: Sun Nov 14 13:09:58 2021
	Circuit File: C:\Users\andre\Documents\NTNU\ProjectTFE4152\project\spice\comp_tb.cir
	Analysis: DC Transfer Curves

**************************  Circuit Description  **************************

     1:  *include ../../models/ptm_130_aimspice.spi
     2:  * Beta Version released on 2/22/06
     3:  
     4:  * PTM 130nm NMOS
     5:  
     6:  .model  nmos  nmos  level = 21
     7:  +version = 4.0          binunit = 1            paramchk= 1            mobmod  = 0
     8:  +capmod  = 2            igcmod  = 1            igbmod  = 1            geomod  = 1
     9:  +diomod  = 1            rdsmod  = 0            rbodymod= 1            rgatemod= 1
    10:  +permod  = 1            acnqsmod= 0            trnqsmod= 0
    11:  +tnom    = 27           toxe    = 2.25e-9      toxp    = 1.6e-9       toxm    = 2.25e-9
    12:  +dtox    = 0.65e-9      epsrox  = 3.9          wint    = 5e-009       lint    = 10.5e-009
    13:  +ll      = 0            wl      = 0            lln     = 1            wln     = 1
    14:  +lw      = 0            ww      = 0            lwn     = 1            wwn     = 1
    15:  +lwl     = 0            wwl     = 0            xpart   = 0            toxref  = 2.25e-9
    16:  +xl      = -60e-9
    17:  +vth0    = 0.3782       k1      = 0.4          k2      = 0.01         k3      = 0
    18:  +k3b     = 0            w0      = 2.5e-006     dvt0    = 1            dvt1    = 2
    19:  +dvt2    = -0.032       dvt0w   = 0            dvt1w   = 0            dvt2w   = 0
    20:  +dsub    = 0.1          minv    = 0.05         voffl   = 0            dvtp0   = 1.2e-010
    21:  +dvtp1   = 0.1          lpe0    = 0            lpeb    = 0            xj      = 3.92e-008
    22:  +ngate   = 2e+020       ndep    = 1.54e+018    nsd     = 2e+020       phin    = 0
    23:  +cdsc    = 0.0002       cdscb   = 0            cdscd   = 0            cit     = 0
    24:  +voff    = -0.13        nfactor = 1.5          eta0    = 0.0092       etab    = 0
    25:  +vfb     = -0.55        u0      = 0.05928      ua      = 6e-010       ub      = 1.2e-018
    26:  +uc      = 0            vsat    = 100370       a0      = 1            ags     = 1e-020
    27:  +a1      = 0            a2      = 1            b0      = 0            b1      = 0
    28:  +keta    = 0.04         dwg     = 0            dwb     = 0            pclm    = 0.06
    29:  +pdiblc1 = 0.001        pdiblc2 = 0.001        pdiblcb = -0.005       drout   = 0.5
    30:  +pvag    = 1e-020       delta   = 0.01         pscbe1  = 8.14e+008    pscbe2  = 1e-007
    31:  +fprout  = 0.2          pdits   = 0.08         pditsd  = 0.23         pditsl  = 2.3e+006
    32:  +rsh     = 5            rdsw    = 200          rsw     = 100          rdw     = 100
    33:  +rdswmin = 0            rdwmin  = 0            rswmin  = 0            prwg    = 0
    34:  +prwb    = 6.8e-011     wr      = 1            alpha0  = 0.074        alpha1  = 0.005
    35:  +beta0   = 30           agidl   = 0.0002       bgidl   = 2.1e+009     cgidl   = 0.0002
    36:  +egidl   = 0.8
    37:  +aigbacc = 0.012        bigbacc = 0.0028       cigbacc = 0.002
    38:  +nigbacc = 1            aigbinv = 0.014        bigbinv = 0.004        cigbinv = 0.004
    39:  +eigbinv = 1.1          nigbinv = 3            aigc    = 0.012        bigc    = 0.0028
    40:  +cigc    = 0.002        aigsd   = 0.012        bigsd   = 0.0028       cigsd   = 0.002
    41:  +nigc    = 1            poxedge = 1            pigcd   = 1            ntox    = 1
    42:  +xrcrg1  = 12           xrcrg2  = 5
    43:  +cgso    = 2.4e-010     cgdo    = 2.4e-010     cgbo    = 2.56e-011    cgdl    = 2.653e-10
    44:  +cgsl    = 2.653e-10    ckappas = 0.03         ckappad = 0.03         acde    = 1
    45:  +moin    = 15           noff    = 0.9          voffcv  = 0.02
    46:  +kt1     = -0.11        kt1l    = 0            kt2     = 0.022        ute     = -1.5
    47:  +ua1     = 4.31e-009    ub1     = 7.61e-018    uc1     = -5.6e-011    prt     = 0
    48:  +at      = 33000
    49:  +fnoimod = 1            tnoimod = 0
    50:  +jss     = 0.0001       jsws    = 1e-011       jswgs   = 1e-010       njs     = 1
    51:  +ijthsfwd= 0.01         ijthsrev= 0.001        bvs     = 10           xjbvs   = 1
    52:  +jsd     = 0.0001       jswd    = 1e-011       jswgd   = 1e-010       njd     = 1
    53:  +ijthdfwd= 0.01         ijthdrev= 0.001        bvd     = 10           xjbvd   = 1
    54:  +pbs     = 1            cjs     = 0.0005       mjs     = 0.5          pbsws   = 1
    55:  +cjsws   = 5e-010       mjsws   = 0.33         pbswgs  = 1            cjswgs  = 3e-010
    56:  +mjswgs  = 0.33         pbd     = 1            cjd     = 0.0005       mjd     = 0.5
    57:  +pbswd   = 1            cjswd   = 5e-010       mjswd   = 0.33         pbswgd  = 1
    58:  +cjswgd  = 5e-010       mjswgd  = 0.33         tpb     = 0.005        tcj     = 0.001
    59:  +tpbsw   = 0.005        tcjsw   = 0.001        tpbswg  = 0.005        tcjswg  = 0.001
    60:  +xtis    = 3            xtid    = 3
    61:  +dmcg    = 0e-006       dmci    = 0e-006       dmdg    = 0e-006       dmcgt   = 0e-007
    62:  +dwj     = 0.0e-008     xgw     = 0e-007       xgl     = 0e-008
    63:  +rshg    = 0.4          gbmin   = 1e-010       rbpb    = 5            rbpd    = 15
    64:  +rbps    = 15           rbdb    = 15           rbsb    = 15           ngcon   = 1
    65:  
    66:  
    67:  
    68:  
    69:  
    70:  
    71:  
    72:  
    73:  
    74:  * PTM 130nm PMOS
    75:  
    76:  .model  pmos  pmos  level = 21
    77:  +version = 4.0          binunit = 1            paramchk= 1            mobmod  = 0
    78:  +capmod  = 2            igcmod  = 1            igbmod  = 1            geomod  = 1
    79:  +diomod  = 1            rdsmod  = 0            rbodymod= 1            rgatemod= 1
    80:  +permod  = 1            acnqsmod= 0            trnqsmod= 0
    81:  +tnom    = 27           toxe    = 2.35e-009    toxp    = 1.6e-009     toxm    = 2.35e-009
    82:  +dtox    = 0.75e-9      epsrox  = 3.9          wint    = 5e-009       lint    = 10.5e-009
    83:  +ll      = 0            wl      = 0            lln     = 1            wln     = 1
    84:  +lw      = 0            ww      = 0            lwn     = 1            wwn     = 1
    85:  +lwl     = 0            wwl     = 0            xpart   = 0            toxref  = 2.35e-009
    86:  +xl      = -60e-9
    87:  +vth0    = -0.321       k1      = 0.4          k2      = -0.01        k3      = 0
    88:  +k3b     = 0            w0      = 2.5e-006     dvt0    = 1            dvt1    = 2
    89:  +dvt2    = -0.032       dvt0w   = 0            dvt1w   = 0            dvt2w   = 0
    90:  +dsub    = 0.1          minv    = 0.05         voffl   = 0            dvtp0   = 1e-009
    91:  +dvtp1   = 0.05         lpe0    = 0            lpeb    = 0            xj      = 3.92e-008
    92:  +ngate   = 2e+020       ndep    = 1.14e+018    nsd     = 2e+020       phin    = 0
    93:  +cdsc    = 0.000258     cdscb   = 0            cdscd   = 6.1e-008     cit     = 0
    94:  +voff    = -0.126       nfactor = 1.5          eta0    = 0.0092       etab    = 0
    95:  +vfb     = 0.55         u0      = 0.00835      ua      = 2.0e-009     ub      = 0.5e-018
    96:  +uc      = -3e-011      vsat    = 70000        a0      = 1.0          ags     = 1e-020
    97:  +a1      = 0            a2      = 1            b0      = -1e-020      b1      = 0
    98:  +keta    = -0.047       dwg     = 0            dwb     = 0            pclm    = 0.12
    99:  +pdiblc1 = 0.001        pdiblc2 = 0.001        pdiblcb = 3.4e-008     drout   = 0.56
   100:  +pvag    = 1e-020       delta   = 0.01         pscbe1  = 8.14e+008    pscbe2  = 9.58e-007
   101:  +fprout  = 0.2          pdits   = 0.08         pditsd  = 0.23         pditsl  = 2.3e+006
   102:  +rsh     = 5            rdsw    = 240          rsw     = 120          rdw     = 120
   103:  +rdswmin = 0            rdwmin  = 0            rswmin  = 0            prwg    = 3.22e-008
   104:  +prwb    = 6.8e-011     wr      = 1            alpha0  = 0.074        alpha1  = 0.005
   105:  +beta0   = 30           agidl   = 0.0002       bgidl   = 2.1e+009     cgidl   = 0.0002
   106:  +egidl   = 0.8
   107:  +aigbacc = 0.012        bigbacc = 0.0028       cigbacc = 0.002
   108:  +nigbacc = 1            aigbinv = 0.014        bigbinv = 0.004        cigbinv = 0.004
   109:  +eigbinv = 1.1          nigbinv = 3            aigc    = 0.69         bigc    = 0.0012
   110:  +cigc    = 0.0008       aigsd   = 0.0087       bigsd   = 0.0012       cigsd   = 0.0008
   111:  +nigc    = 1            poxedge = 1            pigcd   = 1            ntox    = 1
   112:  +xrcrg1  = 12           xrcrg2  = 5
   113:  +cgso    = 2.4e-010     cgdo    = 2.4e-010     cgbo    = 2.56e-011    cgdl    = 2.653e-10
   114:  +cgsl    = 2.653e-10    ckappas = 0.03         ckappad = 0.03         acde    = 1
   115:  +moin    = 15           noff    = 0.9          voffcv  = 0.02
   116:  +kt1     = -0.11        kt1l    = 0            kt2     = 0.022        ute     = -1.5
   117:  +ua1     = 4.31e-009    ub1     = 7.61e-018    uc1     = -5.6e-011    prt     = 0
   118:  +at      = 33000
   119:  +fnoimod = 1            tnoimod = 0
   120:  +jss     = 0.0001       jsws    = 1e-011       jswgs   = 1e-010       njs     = 1
   121:  +ijthsfwd= 0.01         ijthsrev= 0.001        bvs     = 10           xjbvs   = 1
   122:  +jsd     = 0.0001       jswd    = 1e-011       jswgd   = 1e-010       njd     = 1
   123:  +ijthdfwd= 0.01         ijthdrev= 0.001        bvd     = 10           xjbvd   = 1
   124:  +pbs     = 1            cjs     = 0.0005       mjs     = 0.5          pbsws   = 1
   125:  +cjsws   = 5e-010       mjsws   = 0.33         pbswgs  = 1            cjswgs  = 3e-010
   126:  +mjswgs  = 0.33         pbd     = 1            cjd     = 0.0005       mjd     = 0.5
   127:  +pbswd   = 1            cjswd   = 5e-010       mjswd   = 0.33         pbswgd  = 1
   128:  +cjswgd  = 5e-010       mjswgd  = 0.33         tpb     = 0.005        tcj     = 0.001
   129:  +tpbsw   = 0.005        tcjsw   = 0.001        tpbswg  = 0.005        tcjswg  = 0.001
   130:  +xtis    = 3            xtid    = 3
   131:  +dmcg    = 0e-006       dmci    = 0e-006       dmdg    = 0e-006       dmcgt   = 0e-007
   132:  +dwj     = 0.0e-008     xgw     = 0e-007       xgl     = 0e-008
   133:  +rshg    = 0.4          gbmin   = 1e-010       rbpb    = 5            rbpd    = 15
   134:  +rbps    = 15           rbdb    = 15           rbsb    = 15           ngcon   = 1
   135:  
   136:  
   137:  
   138:  
   139:  
   140:  
   141:  
   142:  
   143:  
   144:  *end of: ../../models/ptm_130_aimspice.spi
   145:  *include ../../lib/SUN_TR_GF130N.spi
   146:  * Transistor library
   147:  
   148:  .SUBCKT PCH D G S B
   149:  M1 D G S B pmos  w=1.08u  l=0.13u
   150:  .ENDS
   151:  
   152:  .SUBCKT NCH D G S B
   153:  M1 D G S B nmos  w=1.08u  l=0.13u
   154:  .ENDS
   155:  
   156:  .SUBCKT NCHCM D G S B
   157:  XM0 N0 G S B NCH
   158:  XM1 N1 G N0 B NCH
   159:  XM4 N2 G N1 B NCH
   160:  XM5 D G N2 B NCH
   161:  .ENDS
   162:  
   163:  .SUBCKT PCHCM D G S B
   164:  XM0 N0 G S B PCH
   165:  XM1 N1 G N0 B PCH
   166:  XM4 N2 G N1 B PCH
   167:  XM5 D G N2 B PCH
   168:  .ENDS
   169:  
   170:  .SUBCKT NCHA D G S B
   171:  XM0 D G S B NCH
   172:  XM1 S G D B NCH
   173:  .ENDS
   174:  
   175:  .SUBCKT PCHA D G S B
   176:  XM0 D G S B PCH
   177:  XM1 S G D B PCH
   178:  .ENDS
   179:  
   180:  .SUBCKT NCHCM2 D G S B
   181:  XM0 D G S B NCHCM
   182:  XM1 S G D B NCHCM
   183:  .ENDS
   184:  
   185:  .SUBCKT PCHCM2 D G S B
   186:  XM0 D G S B PCHCM
   187:  XM1 S G D B PCHCM
   188:  .ENDS
   189:  
   190:  .SUBCKT PCH_4C D G S B
   191:  M1 D G S B pmos  w=2.52u  l=0.13u
   192:  .ENDS
   193:  
   194:  .SUBCKT PCHA_4C D G S B
   195:  XM0 D G S B PCH_4C
   196:  XM1 S G D B PCH_4C
   197:  .ENDS
   198:  
   199:  .SUBCKT PCHCM_4C D G S B
   200:  XM0 N0 G S B PCH_4C
   201:  XM1 N1 G N0 B PCH_4C
   202:  XM4 N2 G N1 B PCH_4C
   203:  XM5 D G N2 B PCH_4C
   204:  .ENDS
   205:  
   206:  .SUBCKT PCHCM2_4C D G S B
   207:  XM0 D G S B PCHCM_4C
   208:  XM1 S G D B PCHCM_4C
   209:  .ENDS
   210:  
   211:  .SUBCKT PCH_6C D G S B
   212:  M1 D G S B pmos  w=3.96u  l=0.13u
   213:  .ENDS
   214:  
   215:  .SUBCKT PCHA_6C D G S B
   216:  XM0 D G S B PCH_6C
   217:  XM1 S G D B PCH_6C
   218:  .ENDS
   219:  
   220:  .SUBCKT PCHCM_6C D G S B
   221:  XM0 N0 G S B PCH_6C
   222:  XM1 N1 G N0 B PCH_6C
   223:  XM4 N2 G N1 B PCH_6C
   224:  XM5 D G N2 B PCH_6C
   225:  .ENDS
   226:  
   227:  .SUBCKT PCHCM2_6C D G S B
   228:  XM0 D G S B PCHCM_6C
   229:  XM1 S G D B PCHCM_6C
   230:  .ENDS
   231:  
   232:  .SUBCKT PCH_10C D G S B
   233:  M1 D G S B pmos  w=6.84u  l=0.13u
   234:  .ENDS
   235:  
   236:  .SUBCKT PCHA_10C D G S B
   237:  XM0 D G S B PCH_10C
   238:  XM1 S G D B PCH_10C
   239:  .ENDS
   240:  
   241:  .SUBCKT PCHCM_10C D G S B
   242:  XM0 N0 G S B PCH_10C
   243:  XM1 N1 G N0 B PCH_10C
   244:  XM4 N2 G N1 B PCH_10C
   245:  XM5 D G N2 B PCH_10C
   246:  .ENDS
   247:  
   248:  .SUBCKT PCHCM2_10C D G S B
   249:  XM0 D G S B PCHCM_10C
   250:  XM1 S G D B PCHCM_10C
   251:  .ENDS
   252:  
   253:  .SUBCKT PCH_12C D G S B
   254:  M1 D G S B pmos  w=8.28u  l=0.13u
   255:  .ENDS
   256:  
   257:  .SUBCKT PCHA_12C D G S B
   258:  XM0 D G S B PCH_12C
   259:  XM1 S G D B PCH_12C
   260:  .ENDS
   261:  
   262:  .SUBCKT PCHCM_12C D G S B
   263:  XM0 N0 G S B PCH_12C
   264:  XM1 N1 G N0 B PCH_12C
   265:  XM4 N2 G N1 B PCH_12C
   266:  XM5 D G N2 B PCH_12C
   267:  .ENDS
   268:  
   269:  .SUBCKT PCHCM2_12C D G S B
   270:  XM0 D G S B PCHCM_12C
   271:  XM1 S G D B PCHCM_12C
   272:  .ENDS
   273:  
   274:  .SUBCKT NCH_4C D G S B
   275:  M1 D G S B nmos  w=2.52u  l=0.13u
   276:  .ENDS
   277:  
   278:  .SUBCKT NCHA_4C D G S B
   279:  XM0 D G S B NCH_4C
   280:  XM1 S G D B NCH_4C
   281:  .ENDS
   282:  
   283:  .SUBCKT NCHCM_4C D G S B
   284:  XM0 N0 G S B NCH_4C
   285:  XM1 N1 G N0 B NCH_4C
   286:  XM4 N2 G N1 B NCH_4C
   287:  XM5 D G N2 B NCH_4C
   288:  .ENDS
   289:  
   290:  .SUBCKT NCHCM2_4C D G S B
   291:  XM0 D G S B NCHCM_4C
   292:  XM1 S G D B NCHCM_4C
   293:  .ENDS
   294:  
   295:  .SUBCKT NCH_6C D G S B
   296:  M1 D G S B nmos  w=3.96u  l=0.13u
   297:  .ENDS
   298:  
   299:  .SUBCKT NCHA_6C D G S B
   300:  XM0 D G S B NCH_6C
   301:  XM1 S G D B NCH_6C
   302:  .ENDS
   303:  
   304:  .SUBCKT NCHCM_6C D G S B
   305:  XM0 N0 G S B NCH_6C
   306:  XM1 N1 G N0 B NCH_6C
   307:  XM4 N2 G N1 B NCH_6C
   308:  XM5 D G N2 B NCH_6C
   309:  .ENDS
   310:  
   311:  .SUBCKT NCHCM2_6C D G S B
   312:  XM0 D G S B NCHCM_6C
   313:  XM1 S G D B NCHCM_6C
   314:  .ENDS
   315:  
   316:  .SUBCKT NCH_10C D G S B
   317:  M1 D G S B nmos  w=6.84u  l=0.13u
   318:  .ENDS
   319:  
   320:  .SUBCKT NCHA_10C D G S B
   321:  XM0 D G S B NCH_10C
   322:  XM1 S G D B NCH_10C
   323:  .ENDS
   324:  
   325:  .SUBCKT NCHCM_10C D G S B
   326:  XM0 N0 G S B NCH_10C
   327:  XM1 N1 G N0 B NCH_10C
   328:  XM4 N2 G N1 B NCH_10C
   329:  XM5 D G N2 B NCH_10C
   330:  .ENDS
   331:  
   332:  .SUBCKT NCHCM2_10C D G S B
   333:  XM0 D G S B NCHCM_10C
   334:  XM1 S G D B NCHCM_10C
   335:  .ENDS
   336:  
   337:  .SUBCKT NCH_12C D G S B
   338:  M1 D G S B nmos  w=8.28u  l=0.13u
   339:  .ENDS
   340:  
   341:  .SUBCKT NCHA_12C D G S B
   342:  XM0 D G S B NCH_12C
   343:  XM1 S G D B NCH_12C
   344:  .ENDS
   345:  
   346:  .SUBCKT NCHCM_12C D G S B
   347:  XM0 N0 G S B NCH_12C
   348:  XM1 N1 G N0 B NCH_12C
   349:  XM4 N2 G N1 B NCH_12C
   350:  XM5 D G N2 B NCH_12C
   351:  .ENDS
   352:  
   353:  .SUBCKT NCHCM2_12C D G S B
   354:  XM0 D G S B NCHCM_12C
   355:  XM1 S G D B NCHCM_12C
   356:  .ENDS
   357:  
   358:  .SUBCKT TAPCELLB_CV AVDD AVSS
   359:  XMN1 AVSS AVSS AVSS AVSS NCH
   360:  XMP1 AVDD AVDD AVDD AVDD PCH
   361:  .ENDS
   362:  
   363:  .SUBCKT TIEH_CV Y AVDD AVSS
   364:  XMN0 A A AVSS AVSS NCH
   365:  XMP0 Y A AVDD AVDD PCH
   366:  .ENDS
   367:  
   368:  .SUBCKT TIEL_CV Y AVDD AVSS
   369:  XMN0 Y A AVSS AVSS NCH
   370:  XMP0 A A AVDD AVDD PCH
   371:  .ENDS
   372:  
   373:  .SUBCKT IVX1_CV A Y AVDD AVSS
   374:  XMN0 Y A AVSS AVSS NCH
   375:  XMP0 Y A AVDD AVDD PCH
   376:  .ENDS
   377:  
   378:  .SUBCKT IVX2_CV A Y AVDD AVSS
   379:  XMN0 Y A AVSS AVSS NCH
   380:  XMN1 AVSS A Y AVSS NCH
   381:  XMP0 Y A AVDD AVDD PCH
   382:  XMP1 AVDD A Y AVDD PCH
   383:  .ENDS
   384:  
   385:  .SUBCKT IVX4_CV A Y AVDD AVSS
   386:  XMN0 Y A AVSS AVSS NCH
   387:  XMN1 AVSS A Y AVSS NCH
   388:  XMN2 Y A AVSS AVSS NCH
   389:  XMN3 AVSS A Y AVSS NCH
   390:  XMP0 Y A AVDD AVDD PCH
   391:  XMP1 AVDD A Y AVDD PCH
   392:  XMP2 Y A AVDD AVDD PCH
   393:  XMP3 AVDD A Y AVDD PCH
   394:  .ENDS
   395:  
   396:  .SUBCKT IVX8_CV A Y AVDD AVSS
   397:  XMN0 Y A AVSS AVSS NCH
   398:  XMN1 AVSS A Y AVSS NCH
   399:  XMN2 Y A AVSS AVSS NCH
   400:  XMN3 AVSS A Y AVSS NCH
   401:  XMN4 Y A AVSS AVSS NCH
   402:  XMN5 AVSS A Y AVSS NCH
   403:  XMN6 Y A AVSS AVSS NCH
   404:  XMN7 AVSS A Y AVSS NCH
   405:  XMP0 Y A AVDD AVDD PCH
   406:  XMP1 AVDD A Y AVDD PCH
   407:  XMP2 Y A AVDD AVDD PCH
   408:  XMP3 AVDD A Y AVDD PCH
   409:  XMP4 Y A AVDD AVDD PCH
   410:  XMP5 AVDD A Y AVDD PCH
   411:  XMP6 Y A AVDD AVDD PCH
   412:  XMP7 AVDD A Y AVDD PCH
   413:  .ENDS
   414:  
   415:  .SUBCKT BFX1_CV A Y AVDD AVSS
   416:  XMN0 AVSS A B AVSS NCH
   417:  XMN1 Y B AVSS AVSS NCH
   418:  XMP0 AVDD A B AVDD PCH
   419:  XMP1 Y B AVDD AVDD PCH
   420:  .ENDS
   421:  
   422:  .SUBCKT NRX1_CV A B Y AVDD AVSS
   423:  XMN0 Y A AVSS AVSS NCH
   424:  XMN1 AVSS B Y AVSS NCH
   425:  XMP0 N1 A AVDD AVDD PCH
   426:  XMP1 Y B N1 AVDD PCH
   427:  .ENDS
   428:  
   429:  .SUBCKT NDX1_CV A B Y AVDD AVSS
   430:  XMN0 N1 A AVSS AVSS NCH
   431:  XMN1 Y B N1 AVSS NCH
   432:  XMP0 Y A AVDD AVDD PCH
   433:  XMP1 AVDD B Y AVDD PCH
   434:  .ENDS
   435:  
   436:  .SUBCKT ORX1_CV A B Y AVDD AVSS
   437:  XA1 A B YN AVDD AVSS NRX1_CV
   438:  XA2 YN Y AVDD AVSS IVX1_CV
   439:  .ENDS
   440:  
   441:  .SUBCKT ORX2_CV A B Y AVDD AVSS
   442:  XA1 A B YN AVDD AVSS NRX1_CV
   443:  XA2 YN Y AVDD AVSS IVX1_CV
   444:  .ENDS
   445:  
   446:  .SUBCKT ORX4_CV A B Y AVDD AVSS
   447:  XA1 A B YN AVDD AVSS NRX1_CV
   448:  XA2 YN Y AVDD AVSS IVX1_CV
   449:  .ENDS
   450:  
   451:  .SUBCKT ANX1_CV A B Y AVDD AVSS
   452:  XA1 A B YN AVDD AVSS NDX1_CV
   453:  XA2 YN Y AVDD AVSS IVX1_CV
   454:  .ENDS
   455:  
   456:  .SUBCKT ANX2_CV A B Y AVDD AVSS
   457:  XA1 A B YN AVDD AVSS NDX1_CV
   458:  XA2 YN Y AVDD AVSS IVX1_CV
   459:  .ENDS
   460:  
   461:  .SUBCKT ANX4_CV A B Y AVDD AVSS
   462:  XA1 A B YN AVDD AVSS NDX1_CV
   463:  XA2 YN Y AVDD AVSS IVX1_CV
   464:  .ENDS
   465:  
   466:  .SUBCKT ANX8_CV A B Y AVDD AVSS
   467:  XA1 A B YN AVDD AVSS NDX1_CV
   468:  XA2 YN Y AVDD AVSS IVX1_CV
   469:  .ENDS
   470:  
   471:  .SUBCKT IVTRIX1_CV A C CN Y AVDD AVSS
   472:  XMN0 N1 A AVSS AVSS NCH
   473:  XMN1 Y C N1 AVSS NCH
   474:  XMP0 N2 A AVDD AVDD PCH
   475:  XMP1 Y CN N2 AVDD PCH
   476:  .ENDS
   477:  
   478:  .SUBCKT NDTRIX1_CV A C CN RN Y AVDD AVSS
   479:  XMN2 N1 RN AVSS AVSS NCH
   480:  XMN0 N2 A N1 AVSS NCH
   481:  XMN1 Y C N2 AVSS NCH
   482:  XMP2 AVDD RN N2 AVDD PCH
   483:  XMP0 N2 A AVDD AVDD PCH
   484:  XMP1 Y CN N2 AVDD PCH
   485:  .ENDS
   486:  
   487:  .SUBCKT DFRNQNX1_CV D CK RN Q QN AVDD AVSS
   488:  XA0 AVDD AVSS TAPCELLB_CV
   489:  XA1 CK RN CKN AVDD AVSS NDX1_CV
   490:  XA2 CKN CKB AVDD AVSS IVX1_CV
   491:  XA3 D CKN CKB A0 AVDD AVSS IVTRIX1_CV
   492:  XA4 A1 CKB CKN A0 AVDD AVSS IVTRIX1_CV
   493:  XA5 A0 A1 AVDD AVSS IVX1_CV
   494:  XA6 A1 CKB CKN QN AVDD AVSS IVTRIX1_CV
   495:  XA7 Q CKN CKB RN QN AVDD AVSS NDTRIX1_CV
   496:  XA8 QN Q AVDD AVSS IVX1_CV
   497:  .ENDS
   498:  
   499:  
   500:  .SUBCKT DFSRQNX1_CV D CK S R Q QN AVDD AVSS
   501:  XA0 AVDD AVSS TAPCELLB_CV
   502:  XA0a R RN AVDD AVSS IVX1_CV
   503:  XA1 CK RN CKN AVDD AVSS NDX1_CV
   504:  XA2 CKN CKB AVDD AVSS IVX1_CV
   505:  XA3 D CKN CKB A0 AVDD AVSS IVTRIX1_CV
   506:  XA4 A1 CKB CKN A0 AVDD AVSS IVTRIX1_CV
   507:  XA5 A0 A1 AVDD AVSS IVX1_CV
   508:  XA6 A1 CKB CKN QN AVDD AVSS IVTRIX1_CV
   509:  XA7 Q CKN CKB RN QN AVDD AVSS NDTRIX1_CV
   510:  XA8 QN Q AVDD AVSS IVX1_CV
   511:  .ENDS
   512:  
   513:  
   514:  
   515:  .SUBCKT SCX1_CV A Y AVDD AVSS
   516:  XA2 N1 A AVSS AVSS NCH
   517:  XA3 SCO A N1 AVSS NCH
   518:  XA4a AVDD SCO N1 AVSS NCH
   519:  XA4b AVDD SCO N1 AVSS NCH
   520:  XA5 Y SCO AVSS AVSS NCH
   521:  XB0 N2 A AVDD AVDD PCH
   522:  XB1 SCO A N2 AVDD PCH
   523:  XB3a N2 SCO AVSS AVDD PCH
   524:  XB3b N2 SCO AVSS AVDD PCH
   525:  XB4 Y SCO AVDD AVDD PCH
   526:  .ENDS
   527:  
   528:  .SUBCKT SWX2_CV A Y VREF AVDD AVSS
   529:  XMN0 Y A AVSS AVSS NCH
   530:  XMN1 AVSS A Y AVSS NCH
   531:  XMP0 Y A VREF AVDD PCH
   532:  XMP1 VREF A Y AVDD PCH
   533:  .ENDS
   534:  
   535:  .SUBCKT SWX4_CV A Y VREF AVDD AVSS
   536:  XMN0 Y A AVSS AVSS NCH
   537:  XMN1 AVSS A Y AVSS NCH
   538:  XMN2 Y A AVSS AVSS NCH
   539:  XMN3 AVSS A Y AVSS NCH
   540:  XMP0 Y A VREF AVDD PCH
   541:  XMP1 VREF A Y AVDD PCH
   542:  XMP2 Y A VREF AVDD PCH
   543:  XMP3 VREF A Y AVDD PCH
   544:  .ENDS
   545:  
   546:  .SUBCKT TGPD_CV C A B AVDD AVSS
   547:  XMN0 AVSS C CN AVSS NCH
   548:  XMN1 B C AVSS AVSS NCH
   549:  XMN2 A CN B AVSS NCH
   550:  XMP0 AVDD C CN AVDD PCH
   551:  XMP1_DMY B AVDD AVDD AVDD PCH
   552:  XMP2 A C B AVDD PCH
   553:  .ENDS
   554:  
   555:  .SUBCKT SUN_TR AVDD AVSS
   556:  XA0 AVDD AVSS TAPCELLB_CV
   557:  XA1 Y1 AVDD AVSS TIEH_CV
   558:  XA2 Y2 AVDD AVSS TIEL_CV
   559:  XB0 AVDD AVSS TAPCELLB_CV
   560:  XB3 A3 Y3 AVDD AVSS IVX1_CV
   561:  XB4 A4 Y4 AVDD AVSS IVX2_CV
   562:  XB5 A5 Y5 AVDD AVSS IVX4_CV
   563:  XB6 A6 Y6 AVDD AVSS IVX8_CV
   564:  XC0 AVDD AVSS TAPCELLB_CV
   565:  XC7 A7 Y7 AVDD AVSS BFX1_CV
   566:  XD0 AVDD AVSS TAPCELLB_CV
   567:  XD8 A8 B8 Y8 AVDD AVSS NRX1_CV
   568:  XD9 A9 B9 Y9 AVDD AVSS NDX1_CV
   569:  XD10 A10 B10 Y10 AVDD AVSS ORX1_CV
   570:  XD11 A11 B11 Y11 AVDD AVSS ANX1_CV
   571:  XE0 AVDD AVSS TAPCELLB_CV
   572:  XE12 A12 Y12 AVDD AVSS SCX1_CV
   573:  XF0 AVDD AVSS TAPCELLB_CV
   574:  XF13 A13 Y13 V13 AVDD AVSS SWX2_CV
   575:  XF14 A14 Y14 V14 AVDD AVSS SWX4_CV
   576:  XF15 A15 Y15 V15 AVDD AVSS TGPD_CV
   577:  .ENDS
   578:  
   579:  *end of: ../../lib/SUN_TR_GF130N.spi
   580:  *include pixelSensor.cir
   581:  * Pixel sensor
   582:  **********************************************************************
   583:  **        Copyright (c) 2021 Carsten Wulff Software, Norway
   584:  ** *******************************************************************
   585:  ** Created       : wulff at 2021-7-22
   586:  ** *******************************************************************
   587:  **  The MIT License (MIT)
   588:  **
   589:  **  Permission is hereby granted, free of charge, to any person obtaining a copy
   590:  **  of this software and associated documentation files (the "Software"), to deal
   591:  **  in the Software without restriction, including without limitation the rights
   592:  **  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   593:  **  copies of the Software, and to permit persons to whom the Software is
   594:  **  furnished to do so, subject to the following conditions:
   595:  **
   596:  **  The above copyright notice and this permission notice shall be included in all
   597:  **  copies or substantial portions of the Software.
   598:  **
   599:  **  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   600:  **  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   601:  **  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   602:  **  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   603:  **  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   604:  **  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   605:  **  SOFTWARE.
   606:  **
   607:  **********************************************************************
   608:  
   609:  .SUBCKT PIXEL_SENSOR VBN1 VRAMP VRESET ERASE EXPOSE READ
   610:  + DATA_7 DATA_6 DATA_5 DATA_4 DATA_3 DATA_2 DATA_1 DATA_0 VDD VSS
   611:  
   612:  
   613:  XS1 VRESET VSTORE ERASE EXPOSE VDD VSS SENSOR
   614:  
   615:  XC1 VCMP_OUT VSTORE VRAMP VDD VSS COMP
   616:  
   617:  XM1 READ VCMP_OUT DATA_7 DATA_6 DATA_5 DATA_4 DATA_3 DATA_2 DATA_1 DATA_0 VDD VSS MEMORY
   618:  
   619:  .ENDS
   620:  
   621:  .SUBCKT MEMORY READ VCMP_OUT
   622:  + DATA_7 DATA_6 DATA_5 DATA_4 DATA_3 DATA_2 DATA_1 DATA_0 VDD VSS
   623:  
   624:  XM1 VCMP_OUT DATA_0 READ VSS MEMCELL
   625:  XM2 VCMP_OUT DATA_1 READ VSS MEMCELL
   626:  XM3 VCMP_OUT DATA_2 READ VSS MEMCELL
   627:  XM4 VCMP_OUT DATA_3 READ VSS MEMCELL
   628:  XM5 VCMP_OUT DATA_4 READ VSS MEMCELL
   629:  XM6 VCMP_OUT DATA_5 READ VSS MEMCELL
   630:  XM7 VCMP_OUT DATA_6 READ VSS MEMCELL
   631:  XM8 VCMP_OUT DATA_7 READ VSS MEMCELL
   632:  
   633:  .ENDS
   634:  
   635:  .SUBCKT MEMCELL CMP DATA READ VSS
   636:  M1 VG CMP DATA VSS nmos  w=0.2u  l=0.13u
   637:  M2 DATA READ DMEM VSS nmos  w=0.4u  l=0.13u
   638:  M3 DMEM VG VSS VSS nmos  w=1u  l=0.13u
   639:  C1 VG VSS 1p
   640:  .ENDS
   641:  
   642:  .SUBCKT SENSOR VRESET VSTORE ERASE EXPOSE VDD VSS
   643:  
   644:  * Capacitor to model gate-source capacitance
   645:  C1 VSTORE VSS 100f
   646:  Rleak VSTORE VSS 100T
   647:  
   648:  * Switch to reset voltage on capacitor
   649:  BR1 VRESET VSTORE I=V(ERASE)*V(VRESET,VSTORE)/1k
   650:  
   651:  * Switch to expose pixel
   652:  BR2 VPG VSTORE I=V(EXPOSE)*V(VSTORE,VPG)/1k
   653:  
   654:  * Model photocurrent
   655:  Rphoto VPG VSS 1G
   656:  .ENDS
   657:  
   658:  .SUBCKT COMP VCMP_OUT VSTORE VRAMP VDD VSS
   659:  
   660:  * Model comparator
   661:  BC1 VCMP_OUT VSS V = ((atan(100000*(V(VSTORE) - V(VRAMP)))) + 1.58)/3.14*1.5
   662:  
   663:  
   664:  .ENDS
   665:  *end of: pixelSensor.cir
   666:  
   667:  *----------------------------------------------------------------
   668:  * PARAMETERS
   669:  *----------------------------------------------------------------
   670:  
   671:  .param TRF = 10n
   672:  .param TCLK = 100n
   673:  .param C_ERASE = 5
   674:  .param C_EXPOSE = 255
   675:  .param C_CONVERT = 255
   676:  .param C_READ = 5
   677:  
   678:  *- Pulse Width of control signals
   679:  .param PW_ERASE =  {(C_ERASE +1)*TCLK}
   680:  .param PW_EXPOSE =  {(C_EXPOSE +1)*TCLK}
   681:  .param PW_CONVERT =  {(C_CONVERT +1)*TCLK}
   682:  .param PW_READ =  {(C_READ +1)*TCLK}
   683:  
   684:  *- Delay of control signals
   685:  .param TD_ERASE = {TCLK }
   686:  .param TD_EXPOSE = {TD_ERASE + PW_ERASE + TCLK}
   687:  .param TD_CONVERT = {TD_EXPOSE + PW_EXPOSE + TCLK}
   688:  .param TD_READ = {TD_CONVERT + PW_CONVERT + TCLK}
   689:  .param PERIOD = {TD_READ + PW_READ + TCLK}
   690:  
   691:  *- Analog parameters
   692:  .param VDD = 1.5
   693:  .param VADC_MIN = 0.5
   694:  .param VADC_MAX = 1.1
   695:  .param VADC_REF = {VADC_MAX - VADC_MIN}
   696:  .param VADC_LSB = {VADC_REF/256}
   697:  
   698:  
   699:  VDD VDD VSS dc VDD
   700:  V1 VSTORE VSS dc 0.7
   701:  VSS VSS 0 dc 0
   702:  V2 VRAMP VSS dc 0
   703:  
   704:  
   705:  XC1 VCMP_OUT VSTORE VRAMP VDD VSS COMP
   706:  
   707:  .dc V2 0 1.5 0.214286
   708:  .plot v(VCMP_OUT)
   709:  
   710:  
   711:  
   712:  

***************************  Model Parameters  ****************************


***************  Device Parameters (Only for .op analysis)  ***************



**************************  Analysis Parameters  **************************

	Source name #1 .. : V2
	Start value #1 .. : 0
	End value #1 .... : 1.5
	Increment value #1: 0.214286



**************  Options (Only those different from default)  **************



*************************  Simulation Statistics  *************************

	Total number of iterations...........: 18
	Total analysis time (sec)............: 0.01
	Time spent in device loading (sec)...: 0
	Time spent in L-U decomposition (sec): 0
	Time spent in matrix reordering (sec): 0
	Time spent in matrix solving (sec)...: 0

***************************  Kernel Messages  *****************************

Circuit: .include ../../models/ptm_130_aimspice.spi

Warning: Node vdd has less than two connections
Warning: Node vstore has less than two connections
Warning: Node vramp has less than two connections
Warning: Node vcmp_out has less than two connections

